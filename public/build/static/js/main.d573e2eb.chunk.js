(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{262:function(e,t,a){},339:function(e,t,a){"use strict";a.r(t);var n,r,i,c,o,s,l,d,j,b,u,h,m,O,x,p,g,f,v,I,y,N,w,S,k,$,q=a(0),R=a.n(q),_=a(20),C=a.n(_),T=a(10),D=(a(262),a(15)),F=a(86),P=a(408),A=a(425),B=a(442),W=a(426),E=a(216),L=a.n(E),z=a(120),U=a.n(z),M=a(121),Q=a.n(M),Y=a(122),G=a.n(Y),H=a(217),V=a.n(H),J=a(218),K=a.n(J),X=a(219),Z=a.n(X),ee=a(440),te=a(1),ae=Object(q.createContext)(null),ne=function(e){var t=e.children,a=Object(q.useState)({token:localStorage.getItem("token")||"",userType:localStorage.getItem("usertype")||"",id:localStorage.getItem("readerId")||localStorage.getItem("librarianId")||""}),n=Object(T.a)(a,2),r=n[0],i=n[1];return Object(te.jsx)(ae.Provider,{value:{user:r,setUser:i},children:Object(te.jsx)(ae.Consumer,{children:function(){return t}})})},re=function(e){var t=Object(q.useContext)(ae),a=t.user,n=t.setUser;return e?[n]:[a,n]},ie=Object(q.createContext)(null),ce=function(e){var t=e.children,a=Object(q.useState)({}),n=Object(T.a)(a,2),r=n[0],i=n[1];return Object(te.jsx)(ie.Provider,{value:{room:r,setRoom:i},children:Object(te.jsx)(ie.Consumer,{children:function(){return t}})})},oe=function(e){var t=Object(q.useContext)(ie),a=t.room,n=t.setRoom;return e?[n]:[a,n]},se=a(413),le=a(345),de=a(415),je=a(414),be=a(453),ue=a(211),he=a.n(ue),me=a(212),Oe=a.n(me),xe=a(117),pe=a.n(xe),ge=a(118),fe=a.n(ge),ve=a(411),Ie=a(168),ye=a(346),Ne=a(417),we=a(347),Se=a(59),ke=a(416),$e=a(18),qe=a(82),Re=(Object(qe.a)(n||(n=Object($e.a)(["\n    {\n        courses {\n            courseId\n            courseType\n            courseStatus\n            courseName\n            file\n          }\n    }\n"]))),Object(qe.a)(r||(r=Object($e.a)(["\n    query ($readerId:Int){\n        readerUnread(readerId:$readerId)\n    }\n"])))),_e=Object(qe.a)(i||(i=Object($e.a)(["\n   query{\n        lib{\n        libraryId\n        libraryName\n        }\n    }\n"]))),Ce=Object(qe.a)(c||(c=Object($e.a)(["\n   query{\n        themes{\n            themeId\n            themeName\n        }\n    }\n"]))),Te=Object(qe.a)(o||(o=Object($e.a)(["\n  query($readerId:Int){\n        readerRooms(readerId:$readerId)\n    }\n"]))),De=Object(qe.a)(s||(s=Object($e.a)(["\n    query ($roomId:Int){\n        rooms(roomId: $roomId) {\n            roomId\n            answers {\n            question{\n                questionId\n                theme\n                library\n                questionText\n                createdAt\n            }\n            answerText\n            createdAt\n            }\n        \n        }\n        notAnsweredRoom(roomId: $roomId) {\n            questionId\n            questionText\n            questionStatus\n            createdAt\n        }\n    }\n"]))),Fe=(Object(qe.a)(l||(l=Object($e.a)(["\n    query($roomId: Int) {\n        notAnsweredRoom(roomId: $roomId) {\n            questionId\n            questionText\n            questionStatus\n            createdAt\n        }\n    }\n"]))),Object(qe.a)(d||(d=Object($e.a)(["\n    query($readerId:Int){\n        notAnsweredQuestion(readerId:$readerId){\n            questionId\n            questionText\n            questionStatus\n            createdAt\n        }\n    }\n"]))),Object(qe.a)(j||(j=Object($e.a)(["\n    query($readerId: Int) {\n        libUnread(readerId: $readerId) {\n            questionId\n            theme\n            library\n            questionText\n            createdAt\n        }\n    }\n"])))),Pe=Object(qe.a)(b||(b=Object($e.a)(["\n    query{\n        lib{\n            libraryId\n            libraryName\n        }\n        readerRoles{\n            roleId\n            roleName\n        }\n    }\n"]))),Ae=Object(qe.a)(u||(u=Object($e.a)(["\n   query($librarianId:Int){\n    librarians(librarianId:$librarianId){\n        librarianId\n        username\n        firstName\n        lastName\n        librarianPhone\n        library\n        }\n    }\n"]))),Be=Object(qe.a)(h||(h=Object($e.a)(["\n   query($page:Int, $limit:Int){\n        unreaded(page:$page, limit:$limit){\n            questionId\n            questionText\n            readerId\n            theme\n            library\n            questionStatus\n            createdAt\n        }\n    }\n"]))),We=Object(qe.a)(m||(m=Object($e.a)(["\n    query IsPublic ($questionId:Int!){\n        isPublic(questionId:$questionId)\n    }\n"]))),Ee=Object(qe.a)(O||(O=Object($e.a)(["\n    query($page: Int, $limit: Int) {\n        records(page: $page, limit: $limit) {\n            fieldId\n            title\n            fileId {\n                fileId\n                path\n                filename\n            }\n            imageId {\n                imageId\n                path\n                filename\n            }\n            creator\n            subject\n            description\n            type\n            source\n            relation\n            coverage\n            publisher\n            contributor\n            rights\n            date\n            format\n            identifier\n            language\n            audience\n            provenance\n            right_holders\n            instructional_method\n            accrual_method\n            accrual_periodicity\n            accrual_policy\n            countOfDownloads\n        }\n    }\n"]))),Le=Object(qe.a)(x||(x=Object($e.a)(["\n    {\n        mostDownloaded {\n            fieldId\n            title\n            fileId {\n                fileId\n                path\n                filename\n            }\n            imageId {\n                imageId\n                path\n                filename\n            }\n            creator\n            subject\n            description\n            type\n            source\n            relation\n            coverage\n            publisher\n            contributor\n            rights\n            date\n            format\n            identifier\n            language\n            audience\n            provenance\n            right_holders\n            instructional_method\n            accrual_method\n            accrual_periodicity\n            accrual_policy\n            countOfDownloads\n        }\n    }\n"]))),ze=(Object(qe.a)(p||(p=Object($e.a)(["\n    mutation addReader(\n        $username: String!\n        $password: String!\n        $email: String\n        $phone: String\n        $readerRole: Int\n    ) {\n        addReader(\n            username: $username\n            password: $password\n            readerEmail: $email\n            readerPhone: $phone\n            readerRole: $readerRole\n        )\n    }\n"]))),Object(qe.a)(g||(g=Object($e.a)(["\n    mutation loginReader(\n        $username: String!,\n        $password: String!\n    ) {\n        loginReader(\n            username: $username,\n            password: $password\n        )\n    }\n"])))),Ue=Object(qe.a)(f||(f=Object($e.a)(["\n    mutation createQuestion(\n    $readerId: Int\n    $questionText: String\n    $theme: Int\n    $library: Int\n    ) {\n    createQuestion(\n        readerId: $readerId\n        questionText: $questionText\n        theme: $theme\n        library: $library\n    ) {\n        questionId\n        questionText\n        theme\n        library\n        createdAt\n    }\n    }\n\n"]))),Me=Object(qe.a)(v||(v=Object($e.a)(["\n    mutation roomQuestion($roomId:Int $questionText:String){\n    roomQuestion(roomId:$roomId, questionText:$questionText)\n    }\n\n"]))),Qe=Object(qe.a)(I||(I=Object($e.a)(["\n    mutation AddLibrarian(\n        $username: String\n        $password: String\n        $firstName: String\n        $lastName: String\n        $librarianPhone: String\n        $library: Int\n        ) {\n        addLibrarian(\n            username: $username\n            password: $password\n            firstName: $firstName\n            lastName: $lastName\n            librarianPhone: $librarianPhone\n            library: $library\n        ) \n    }\n"]))),Ye=Object(qe.a)(y||(y=Object($e.a)(["\n    mutation AddReader(\n        $username: String\n        $password: String\n        $readerEmail: String\n        $readerRole: Int\n        $readerPhone:String\n        ) {\n        addReader(\n            username: $username\n            password: $password\n            readerEmail: $readerEmail\n            readerRole: $readerRole\n            readerPhone:$readerPhone\n        )\n    }\n"]))),Ge=Object(qe.a)(N||(N=Object($e.a)(["\n    mutation CreateRoom($questionId:Int! $librarianId:Int!){\n        createRoom(questionId:$questionId librarianId:$librarianId)\n    }\n"]))),He=Object(qe.a)(w||(w=Object($e.a)(["\n    mutation CreateAnswer(\n        $questionId: Int!\n        $librarianId: Int!\n        $answerText: String\n        \n        ) {\n        createAnswer(\n            questionId: $questionId\n            librarianId: $librarianId\n            answerText: $answerText\n        )\n    }\n\n"]))),Ve=Object(qe.a)(S||(S=Object($e.a)(["\n   mutation UpdateQuestionStatus($questionId:Int!){\n        updateQuestionStatus(questionId:$questionId)\n    }\n"]))),Je=Object(qe.a)(k||(k=Object($e.a)(["\n    mutation CreateRecord(\n        $title: String\n        $fileId: Int\n        $imageId: Int\n        $creator:String\n        $subject: String\n        $description: String\n        $type:String\n        $source:String\n        $relation:String\n        $coverage:String\n        $publisher:String\n        $contributor:String\n        $rights:String\n        $date: String\n        $format:String\n        $identifier:String\n        $language:String\n        $audience:String\n        $provenance:String\n        $right_holders:String\n        $instructional_method:String\n        $accrual_method:String\n        $accrual_periodicity:String\n        $accrual_policy:String\n        ) {\n        createRecord(\n            records: {\n            title: $title\n            fileId: $fileId\n            imageId: $imageId\n            creator:$creator\n            subject: $subject\n            description: $description\n            type:$type\n            source: $source\n            relation:$relation\n            coverage:$coverage\n            publisher:$publisher\n            contributor:$contributor\n            rights:$rights\n            date:$date\n            format:$format\n            identifier:$identifier\n            language:$language\n            audience:$audience\n            provenance:$provenance\n            right_holders:$right_holders\n            instructional_method:$instructional_method\n            accrual_method:$accrual_method\n            accrual_periodicity:$accrual_periodicity\n            accrual_policy:$accrual_policy\n            }\n        )\n        }\n\n"]))),Ke=Object(qe.a)($||($=Object($e.a)(["\n    mutation DownloadedRecord($fileId:Int!){\n        dowloadedRecord(fileId:$fileId)\n    }\n\n"]))),Xe=a(445),Ze=a(450),et=Object(P.a)((function(e){return{root:{width:"100%",backgroundColor:e.palette.background.paper},pagination_button:{display:"flex",justifyContent:"center",padding:"15px"},pagination_page:{textAlign:"center",padding:"15px"}}}));function tt(e){var t=et(),a=Object(q.useState)(1),n=Object(T.a)(a,2),r=n[0],i=n[1],c=Object(Xe.a)(Be,{variables:{page:r,limit:5}}),o=c.data,s=(c.loading,c.error,Object(Ze.a)(Ge)),l=Object(T.a)(s,2),d=l[0],j=l[1].data,b=oe(!0),u=Object(T.a)(b,1)[0];return Object(q.useEffect)((function(){j&&u({roomdata:j})}),[j]),Object(te.jsx)(ve.a,{maxWidth:"sm",children:Object(te.jsxs)(Ie.a,{children:[o?o.unreaded.map((function(a,n){return Object(te.jsx)(se.a,{width:"100%",className:t.root,children:Object(te.jsxs)(le.a,{width:"100%",onClick:function(){return d({variables:{questionId:a.questionId,librarianId:parseInt(e.librarian.id)}})},button:!0,divider:!0,children:[Object(te.jsx)(je.a,{children:Object(te.jsx)(be.a,{children:Object(te.jsx)(he.a,{})})}),Object(te.jsx)(de.a,{primary:a.questionText,secondary:a.createdAt}),Object(te.jsx)(ke.a,{children:Object(te.jsx)(ye.a,{edge:"end","aria-label":"delete",children:Object(te.jsx)(Oe.a,{})})})]})},n)})):Object(te.jsx)(te.Fragment,{}),Object(te.jsxs)(Ne.a,{className:t.pagination_button,disableElevation:!0,variant:"contained",color:"primary",children:[Object(te.jsx)(we.a,{disabled:1===r,onClick:function(){return i(r-1)},children:Object(te.jsx)(pe.a,{})}),Object(te.jsx)(Se.a,{className:t.pagination_page,p:2,children:r}),Object(te.jsx)(we.a,{disabled:!!(o&&o.unreaded.length<5),onClick:function(){return i(r+1)},children:Object(te.jsx)(fe.a,{})})]})]})})}var at,nt,rt,it=a(42),ct=a(5),ot=a(418),st=a(419),lt=a(420),dt=a(423),jt=a(424),bt=a(131),ut=a(214),ht=a.n(ut),mt=a(215),Ot=a.n(mt),xt=a(68),pt=a.n(xt),gt=a(421),ft=a(213),vt=a.n(ft),It=a(451),yt=Object(qe.a)(at||(at=Object($e.a)(["\n    subscription($roomId:Int){\n        newRoomQuestion(roomId:$roomId)\n    }\n\n"]))),Nt=Object(qe.a)(nt||(nt=Object($e.a)(["\n    subscription IsPublicSub($questionId:Int){\n        isPublicSubscript (questionId:$questionId)\n    }\n"]))),wt=Object(qe.a)(rt||(rt=Object($e.a)(["\n    subscription{\n        subscribeDownload\n    }\n"]))),St=Object(P.a)((function(e){return{root:{},media:{height:0,paddingTop:"56.25%"},expand:{transform:"rotate(0deg)",marginLeft:"auto",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest})},expandOpen:{transform:"rotate(180deg)"},avatar:{backgroundColor:bt.a[500]},text_field:{display:"flex"},question_box:{color:"#FBEEC1",background:"#659DBD",fontSize:"1.2em"}}}));function kt(e){var t=e.room,a=e.librarian,n=St(),r=R.a.useState(!1),i=Object(T.a)(r,2),c=i[0],o=i[1],s=R.a.useState({text:"",blured:!1}),l=Object(T.a)(s,2),d=l[0],j=l[1],b=Object(Ze.a)(He),u=Object(T.a)(b,2),h=u[0],m=u[1].data,O=Object(Ze.a)(Ve),x=Object(T.a)(O,2),p=x[0],g=x[1].data,f=Object(It.a)(Nt,{variables:{questionId:t.question_id}}).data,v=Object(Xe.a)(We,{variables:{questionId:t.question_id}}),I=v.data,y=(v.error,v.loading,function(e){return vt()(e).format("dddd, MMMM DD YYYY")}),N=function(e){e.target.value.length?j({text:e.target.value,blured:!0}):j({text:"",blured:!0})};return Object(q.useEffect)((function(){}),t),console.log(I),console.log(g),console.log(f),Object(te.jsx)(te.Fragment,{children:t&&t.username?Object(te.jsxs)(ot.a,{className:n.root,children:[Object(te.jsx)(st.a,{avatar:Object(te.jsx)(be.a,{"aria-label":"recipe",className:n.avatar,children:t.username.slice(0,1)}),title:t.username,subheader:y(t.question_created_at)}),Object(te.jsxs)(lt.a,{children:[Object(te.jsx)(Se.a,{variant:"body2",color:"textSecondary",component:"p",children:t.question_text}),m&&m.createAnswer?Object(te.jsxs)(ee.a,{display:"flex",flexDirection:"column",width:"100%",justifyContent:"center",alignItems:"flex-end",children:[Object(te.jsx)(ee.a,{className:n.question_box,marginTop:1,padding:2,borderRadius:16,maxWidth:"70%",minWidth:"30%",children:m.createAnswer.answer_text}),Object(te.jsxs)(ee.a,{component:"span",children:[y(m.createAnswer.created_at)," "]})]}):null]}),Object(te.jsxs)(lt.a,{className:n.text_field,children:[d.blured&&!d.text.length?Object(te.jsx)(gt.a,{error:!0,id:"standard-error-helper-text",label:"Enter your question",helperText:"Empty entry.",onBlur:N}):Object(te.jsx)(gt.a,{id:"standard-full-width",style:{margin:8},placeholder:"type your question",fullWidth:!0,margin:"normal",InputLabelProps:{shrink:!0},onBlur:N,onChange:function(e){return e.target.value.length?j({blured:!1,text:e.target.value}):null}}),Object(te.jsx)(we.a,{type:"submit",variant:"contained",color:"primary",className:n.button,endIcon:Object(te.jsx)(pt.a,{}),onClick:function(){d.text.length&&t&&t.question_id&&a&&h({variables:{questionId:t.question_id,librarianId:parseInt(a.id),answerText:d.text}})},disabled:!(!m||!m.createAnswer),children:"Send"})]}),Object(te.jsxs)(dt.a,{disableSpacing:!0,children:[Object(te.jsx)(ye.a,{"aria-label":"add to favorites",onClick:function(){p({variables:{questionId:t.question_id}})},children:I&&void 0===g&&I.isPublic||f&&f.isPublicSubscript?Object(te.jsx)(U.a,{}):Object(te.jsx)(ht.a,{})}),Object(te.jsx)(ye.a,{className:Object(ct.a)(n.expand,Object(it.a)({},n.expandOpen,c)),onClick:function(){o(!c)},"aria-expanded":c,"aria-label":"show more",children:Object(te.jsx)(Ot.a,{})})]}),Object(te.jsx)(jt.a,{in:c,timeout:"auto",unmountOnExit:!0,children:Object(te.jsx)(lt.a,{children:Object(te.jsx)(Se.a,{paragraph:!0,children:"bu oynada bir marta javob qaytarishingiz mumkin keyingi javoblar shaxsiy xonalarda bo'ladi"})})})]}):Object(te.jsx)(te.Fragment,{children:"Smth get wrong"})})}var $t=["children","value","index"];function qt(e){var t=e.children,a=e.value,n=e.index,r=Object(F.a)(e,$t);return Object(te.jsx)("div",Object(D.a)(Object(D.a)({role:"tabpanel",hidden:a!==n,id:"scrollable-force-tabpanel-".concat(n),"aria-labelledby":"scrollable-force-tab-".concat(n)},r),{},{children:a===n&&Object(te.jsx)(ee.a,{p:3,children:t})}))}function Rt(e){return{id:"scrollable-force-tab-".concat(e),"aria-controls":"scrollable-force-tabpanel-".concat(e)}}var _t=Object(P.a)((function(e){return{root:{flexGrow:1,width:"100%",backgroundColor:e.palette.background.paper}}}));function Ct(){var e=_t(),t=R.a.useState(0),a=Object(T.a)(t,2),n=a[0],r=a[1],i=re(!1),c=Object(T.a)(i,1)[0],o=oe(!1),s=Object(T.a)(o,1)[0];return Object(q.useEffect)((function(){s.roomdata&&r(1)}),[s.roomdata]),Object(te.jsxs)("div",{className:e.root,children:[Object(te.jsx)(A.a,{position:"static",color:"default",children:Object(te.jsxs)(B.a,{value:n,onChange:function(e,t){r(t)},variant:"scrollable",scrollButtons:"on",indicatorColor:"primary",textColor:"primary","aria-label":"scrollable force tabs example",children:[Object(te.jsx)(W.a,Object(D.a)({label:"Item One",icon:Object(te.jsx)(L.a,{})},Rt(0))),s&&s.roomdata?Object(te.jsx)(W.a,Object(D.a)({label:"New Room",icon:Object(te.jsx)(U.a,{})},Rt(1))):null,Object(te.jsx)(W.a,Object(D.a)({label:"Item Three",icon:Object(te.jsx)(Q.a,{})},Rt(2))),Object(te.jsx)(W.a,Object(D.a)({label:"Item Four",icon:Object(te.jsx)(G.a,{})},Rt(3))),Object(te.jsx)(W.a,Object(D.a)({label:"Item Five",icon:Object(te.jsx)(V.a,{})},Rt(4))),Object(te.jsx)(W.a,Object(D.a)({label:"Item Six",icon:Object(te.jsx)(K.a,{})},Rt(5))),Object(te.jsx)(W.a,Object(D.a)({label:"Item Seven",icon:Object(te.jsx)(Z.a,{})},Rt(6)))]})}),Object(te.jsx)(qt,{value:n,index:0,children:Object(te.jsx)(tt,{librarian:c})}),s&&s.roomdata?Object(te.jsx)(qt,{value:n,index:1,children:Object(te.jsx)(kt,{room:s.roomdata.createRoom,librarian:c})}):null,Object(te.jsx)(qt,{value:n,index:2,children:"Item mish"}),Object(te.jsx)(qt,{value:n,index:3,children:"Item Four"}),Object(te.jsx)(qt,{value:n,index:4,children:"Item Five"}),Object(te.jsx)(qt,{value:n,index:5,children:"Item Six"}),Object(te.jsx)(qt,{value:n,index:6,children:"Item Seven"})]})}var Tt=a(30),Dt=a(428),Ft=a(351),Pt=a(429),At=a(350),Bt=a(357),Wt=a(354),Et=a(427),Lt=Object(P.a)((function(e){return{root:{display:"flex",flexWrap:"wrap","& > *":{margin:"0 auto",width:"60%",minHeight:"50vh",padding:"3rem"}},button:{margin:"0 auto"},send_message_parent:{position:"relative"},bottom_send_question:{position:"absolute",bottom:0,left:0,width:"100%",padding:"1.3rem",boxSizing:"border-box"},formControl:{margin:e.spacing(1),minWidth:120},question_box:{color:"#FBEEC1",background:"#659DBD",fontSize:"1.2em"},backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}}));function zt(){var e=Lt(),t=R.a.useState(""),a=Object(T.a)(t,2),n=a[0],r=a[1],i=R.a.useState(""),c=Object(T.a)(i,2),o=c[0],s=c[1],l=Object(Xe.a)(_e),d=l.loading,j=l.data,b=Object(Xe.a)(Ce),u=b.loading,h=b.data,m=Object(Ze.a)(Ue),O=Object(T.a)(m,2),x=O[0],p=O[1].data,g=Object(q.useState)({text:"",blured:!1}),f=Object(T.a)(g,2),v=f[0],I=f[1],y=function(e){e.target.value.length?I({text:e.target.value,blured:!0}):I({text:"",blured:!0})};return Object(te.jsx)(te.Fragment,{children:d||u?Object(te.jsx)(Wt.a,{className:e.backdrop,open:!0,children:Object(te.jsx)(Et.a,{color:"inherit"})}):Object(te.jsx)("div",{className:e.root,children:Object(te.jsxs)(Ie.a,{elevation:3,className:e.send_message_parent,children:[Object(te.jsx)(Se.a,{variant:"h4",component:"h2",children:"Your question Section"}),p&&p.createQuestion?Object(te.jsxs)(ee.a,{display:"flex",flexDirection:"column",width:"100%",justifyContent:"center",alignItems:"flex-end",children:[Object(te.jsx)(ee.a,{className:e.question_box,marginTop:1,padding:2,borderRadius:16,maxWidth:"70%",minWidth:"30%",children:p.createQuestion.questionText}),Object(te.jsxs)(ee.a,{component:"span",children:[p.createQuestion.createdAt," "]})]}):null,Object(te.jsxs)("div",{className:e.bottom_send_question,children:[Object(te.jsxs)(Dt.a,{container:!0,children:[Object(te.jsx)(Dt.a,{item:!0,children:Object(te.jsxs)(At.a,{className:e.formControl,children:[Object(te.jsx)(Ft.a,{id:"demo-simple-select-helper-label",children:"Theme"}),Object(te.jsxs)(Bt.a,{labelId:"demo-simple-select-helper-label",id:"demo-simple-select-helper",value:o,onChange:function(e){s(e.target.value)},children:[Object(te.jsx)(Pt.a,{value:"",children:Object(te.jsx)("em",{children:"None"})}),h.themes.map((function(e,t){return Object(te.jsx)(Pt.a,{value:e.themeId,children:e.themeName},t)}))]})]})}),Object(te.jsx)(Dt.a,{item:!0,children:Object(te.jsxs)(At.a,{className:e.formControl,children:[Object(te.jsx)(Ft.a,{id:"demo-simple-select-helper-label",children:"Library"}),Object(te.jsxs)(Bt.a,{labelId:"demo-simple-select-helper-label",id:"demo-simple-select-helper",value:n,onChange:function(e){r(e.target.value)},children:[Object(te.jsx)(Pt.a,{value:"",children:Object(te.jsx)("em",{children:"None"})}),j.lib.map((function(e,t){return Object(te.jsx)(Pt.a,{value:e.libraryId,children:e.libraryName},t)}))]})]})})]}),Object(te.jsxs)(Dt.a,{container:!0,children:[Object(te.jsx)(Dt.a,{item:!0,xs:10,children:v.blured&&!v.text.length?Object(te.jsx)(gt.a,{error:!0,id:"standard-error-helper-text",label:"Enter your question",helperText:"Empty entry.",onBlur:y}):Object(te.jsx)(gt.a,{id:"standard-full-width",style:{margin:8},placeholder:"type your question",fullWidth:!0,margin:"normal",InputLabelProps:{shrink:!0},onBlur:y})}),Object(te.jsx)(Dt.a,{item:!0,xs:2,children:Object(te.jsx)(we.a,{variant:"contained",color:"primary",className:e.button,endIcon:Object(te.jsx)(pt.a,{}),onClick:function(){var e=localStorage.getItem("readerId");v.text.length&&e&&x({variables:{readerId:parseInt(e),questionText:v.text,theme:o||null,library:n?parseInt(n):null}})},children:"Send"})})]})]})]})})})}var Ut=a(232),Mt=Object(P.a)((function(e){return{button:{margin:"0 auto"},send_message_parent:{position:"relative",display:"flex",flexWrap:"wrap","& > *":{margin:"0 auto",width:"60%",padding:"3rem"}},bottom_send_question:{position:"absolute",bottom:0,left:"20%",width:"60%",padding:"1.3rem",boxSizing:"border-box",display:"flex",alignItems:"center"},formControl:{margin:e.spacing(1)},question_box:{color:"#FBEEC1",background:"#659DBD",fontSize:"1.2em"},backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"},form_roomQuestion:{display:"flex"}}})),Qt=function(e){var t=Mt(),a=Object(q.useState)([]),n=Object(T.a)(a,2),r=n[0],i=n[1],c=Object(It.a)(yt,{variables:{roomId:parseInt(e.readerRooms.roomData.room_id)}}).data;return Object(q.useEffect)((function(){c&&i([].concat(Object(Ut.a)(r),[c]))}),[c,r]),Object(te.jsx)(te.Fragment,{children:r.length?r.map((function(e,a){return Object(te.jsxs)("div",{children:[Object(te.jsx)(ee.a,{className:t.question_box,marginTop:1,padding:2,borderRadius:16,maxWidth:"70%",minWidth:"30%",children:e.newRoomQuestion.question_text}),Object(te.jsxs)(ee.a,{component:"span",children:[e.newRoomQuestion.question_text.question_created_at," "]})]},a)})):Object(te.jsx)(te.Fragment,{})})};function Yt(e){var t=Mt();console.log(e);var a=Object(Xe.a)(De,{variables:{roomId:e.roomData.room_id}}),n=a.loading,r=a.data,i=Object(Ze.a)(Me),c=Object(T.a)(i,1)[0],o=Object(q.useState)({text:"",blured:!1}),s=Object(T.a)(o,2),l=s[0],d=s[1],j=function(e){e.target.value.length?d({text:e.target.value,blured:!0}):d({text:"",blured:!0})};return Object(te.jsx)(te.Fragment,{children:n?Object(te.jsx)(Wt.a,{className:t.backdrop,open:!0,children:Object(te.jsx)(Et.a,{color:"inherit"})}):Object(te.jsxs)("div",{className:t.send_message_parent,children:[Object(te.jsxs)(Dt.a,{container:!0,children:[Object(te.jsx)(Dt.a,{item:!0,xs:8,children:Object(te.jsxs)(Se.a,{variant:"h5",component:"h2",children:[Object(te.jsx)("span",{children:"LIBRARIAN: "}),e.roomData.first_name+"  "+e.roomData.last_name]})}),Object(te.jsxs)(Dt.a,{item:!0,xs:4,display:"flex",flexDirection:"column",justifyContent:"space-between",children:[r&&r.rooms[0].answers.question.theme?Object(te.jsxs)(Dt.a,{item:!0,children:["theme:",r.rooms[0].answers.question.theme]}):null,r&&r.rooms[0].answers.question.library?Object(te.jsxs)(Dt.a,{item:!0,children:["library:",r.rooms[0].answers.question.library]}):null]})]}),Object(te.jsxs)("div",{className:"room-messages",children:[r&&r.rooms?r.rooms.map((function(e,a){return Object(te.jsxs)("div",{children:[Object(te.jsxs)(ee.a,{display:"flex",flexDirection:"column",width:"100%",justifyContent:"center",alignItems:"flex-start",children:[Object(te.jsx)(ee.a,{className:t.question_box,marginTop:1,padding:2,borderRadius:16,maxWidth:"70%",minWidth:"30%",children:e.answers.answerText}),Object(te.jsxs)(ee.a,{component:"span",children:[e.answers.createdAt," "]})]}),Object(te.jsxs)(ee.a,{display:"flex",flexDirection:"column",width:"100%",justifyContent:"center",alignItems:"flex-end",children:[Object(te.jsx)(ee.a,{className:t.question_box,marginTop:1,padding:2,borderRadius:16,maxWidth:"70%",minWidth:"30%",children:e.answers.question.questionText}),Object(te.jsxs)(ee.a,{component:"span",children:[e.answers.question.createdAt," "]})]})]},a)})):null,Object(te.jsxs)(ee.a,{display:"flex",flexDirection:"column",width:"100%",justifyContent:"center",alignItems:"flex-end",children:[r&&r.notAnsweredRoom?r.notAnsweredRoom.map((function(e,a){return Object(te.jsxs)("div",{children:[Object(te.jsx)(ee.a,{className:t.question_box,marginTop:1,padding:2,borderRadius:16,maxWidth:"70%",minWidth:"30%",children:e.questionText}),Object(te.jsxs)(ee.a,{component:"span",children:[e.createdAt," "]})]},a)})):null,Object(te.jsx)(Qt,{readerRooms:e})]})]}),Object(te.jsxs)("div",{className:t.bottom_send_question,children:[l.blured&&!l.text.length?Object(te.jsx)(gt.a,{error:!0,id:"standard-error-helper-text",label:"Enter your question",helperText:"Empty entry.",onBlur:j}):Object(te.jsx)(gt.a,{id:"standard-full-width",style:{margin:8},placeholder:"type your question",fullWidth:!0,margin:"normal",InputLabelProps:{shrink:!0},onBlur:j,onChange:function(e){return e.target.value.length?d({blured:!1,text:e.target.value}):null}}),Object(te.jsx)(we.a,{type:"submit",variant:"contained",color:"primary",className:t.button,endIcon:Object(te.jsx)(pt.a,{}),onClick:function(){l.text.length&&e&&e.roomData.room_id&&c({variables:{roomId:parseInt(e.roomData.room_id),questionText:l.text}})},children:"Send"})]})]})})}var Gt=a(430),Ht=a(431),Vt=Object(P.a)((function(e){return{root:{maxWidth:300,margin:"5px"},questions_list:{width:"80%",margin:"0 auto",display:"flex",flexWrap:"wrap"},backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}}));function Jt(){var e=Vt(),t=Object(Xe.a)(Fe,{variables:{readerId:parseInt(localStorage.getItem("readerId"))}}),a=t.loading,n=t.data;return Object(te.jsxs)(te.Fragment,{children:[Object(te.jsx)(Se.a,{component:"h2",children:"Your questions successfully send and will be answeres soon.."}),Object(te.jsx)("div",{className:e.questions_list,children:a?Object(te.jsx)(Wt.a,{className:e.backdrop,open:!0,children:Object(te.jsx)(Et.a,{color:"inherit"})}):n&&n.libUnread?n.libUnread.map((function(t,a){return Object(te.jsx)(ot.a,{className:e.root,children:Object(te.jsxs)(Gt.a,{children:[Object(te.jsx)(Ht.a,{component:"img",alt:"Contemplative Reptile",height:"200",image:"https://picsum.photos/300/200?random="+a,title:"Contemplative Reptile"}),Object(te.jsxs)(lt.a,{children:[t.library?Object(te.jsx)(Se.a,{gutterBottom:!0,variant:"h5",component:"h2",children:t.library}):Object(te.jsx)(te.Fragment,{}),t.theme?Object(te.jsx)(Se.a,{gutterBottom:!0,variant:"h5",component:"h2",children:t.theme}):Object(te.jsx)(te.Fragment,{}),Object(te.jsx)(Se.a,{variant:"body2",color:"primary",component:"h6",children:t.questionText}),Object(te.jsx)(Se.a,{variant:"body2",color:"textSecondary",component:"p",children:t.createdAt})]})]})},a)})):Object(te.jsx)(te.Fragment,{})})]})}var Kt=["children","value","index"];function Xt(e){var t=e.children,a=e.value,n=e.index,r=Object(F.a)(e,Kt);return Object(te.jsx)("div",Object(D.a)(Object(D.a)({role:"tabpanel",hidden:a!==n,id:"scrollable-force-tabpanel-".concat(n),"aria-labelledby":"scrollable-force-tab-".concat(n)},r),{},{children:a===n&&Object(te.jsx)(ee.a,{p:3,children:Object(te.jsx)(te.Fragment,{children:t})})}))}function Zt(e){return{id:"scrollable-force-tab-".concat(e),"aria-controls":"scrollable-force-tabpanel-".concat(e)}}var ea=Object(P.a)((function(e){return{root:{flexGrow:1,width:"100%",backgroundColor:e.palette.background.paper,padding:0},backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}}));function ta(){var e=ea(),t=Object(q.useState)(0),a=Object(T.a)(t,2),n=a[0],r=a[1],i=Object(q.useState)(-1),c=Object(T.a)(i,2),o=c[0],s=c[1],l=Object(Xe.a)(Te,{variables:{readerId:parseInt(localStorage.getItem("readerId"))}}),d=l.loading,j=l.data;return Object(q.useEffect)((function(){s(j?j.readerRooms.length-1:-1)}),[j]),Object(te.jsx)(te.Fragment,{children:d?Object(te.jsx)(Wt.a,{className:e.backdrop,open:!0,children:Object(te.jsx)(Et.a,{color:"inherit"})}):Object(te.jsxs)("div",{className:e.root,children:[Object(te.jsx)(A.a,{position:"static",color:"default",children:Object(te.jsxs)(B.a,{value:n,onChange:function(e,t){r(t)},variant:"scrollable",scrollButtons:"on",indicatorColor:"primary",textColor:"primary","aria-label":"scrollable force tabs example",children:[j&&j.readerRooms?j.readerRooms.map((function(e,t){return Object(te.jsx)(W.a,Object(D.a)({label:"room "+t,icon:Object(te.jsx)(Q.a,{})},Zt(t)))})):Object(te.jsx)(te.Fragment,{}),Object(te.jsx)(W.a,Object(D.a)({label:"Other Question",icon:Object(te.jsx)(G.a,{})},Zt(o+1))),Object(te.jsx)(W.a,Object(D.a)({label:"Send Question",icon:Object(te.jsx)(pt.a,{})},Zt(o+2)))]})}),j&&j.readerRooms?j.readerRooms.map((function(e,t){return Object(te.jsx)(Xt,{value:n,index:t,children:Object(te.jsx)(Yt,{roomData:e})})})):Object(te.jsx)(te.Fragment,{}),Object(te.jsx)(Xt,{value:n,index:o+1,children:Object(te.jsx)(Jt,{})}),Object(te.jsx)(Xt,{value:n,index:o+2,children:Object(te.jsx)(zt,{})})]})})}var aa=a(90),na=a.n(aa),ra=a(123),ia=a(124),ca=a(130),oa=a(125),sa=a.n(oa),la=a(432),da=a(446),ja=Object(P.a)((function(e){return{root:{width:"100%",backgroundColor:e.palette.background.paper},drag_drop:{background:"linear-gradient(to left,  #fff,#50B6F1)",padding:"2rem",cursor:"pointer"}}}));function ba(e){var t=e.sendDataToParent,a=ja(),n=R.a.useState(!1),r=Object(T.a)(n,2),i=r[0],c=r[1],o=Object(q.useCallback)(function(){var e=Object(ia.a)(na.a.mark((function e(a){var n,r,i,o;return na.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=new FormData,r=Object(ra.a)(a);try{for(r.s();!(i=r.n()).done;)o=i.value,n.append("book",o)}catch(s){r.e(s)}finally{r.f()}return e.next=5,sa()({method:"POST",url:"http://localhost:5000/upload/book",data:n,headers:{"Content-Type":"multipart/form-data boundary=".concat(n._boundary)}}).then((function(e){t(e.data.file_id),c(!0),console.log("SUCCESS!!",e)})).catch((function(){console.log("FAILURE!!"),c(!1)}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]),s=Object(ca.a)({onDrop:o}),l=s.getRootProps,d=s.getInputProps,j=s.isDragActive;return Object(te.jsx)(se.a,{className:a.root,children:Object(te.jsxs)(le.a,{children:[Object(te.jsx)(de.a,{children:Object(te.jsxs)("div",Object(D.a)(Object(D.a)({},l()),{},{children:[Object(te.jsx)("input",Object(D.a)(Object(D.a)({},d()),{},{name:"book"})),j?Object(te.jsx)("p",{className:a.drag_drop,children:"Drop the files here ..."}):Object(te.jsx)("p",{className:a.drag_drop,children:"Drag and drop full text"})]}))}),Object(te.jsx)(la.a,{children:Object(te.jsx)(da.a,{edge:"start",checked:i,color:"primary",tabIndex:-1,disableRipple:!0})})]})})}var ua=Object(P.a)((function(e){return{root:{width:"100%",backgroundColor:e.palette.background.paper},drag_drop:{background:"linear-gradient(to left,  #fff,#50B6F1)",padding:"2rem",cursor:"pointer"}}}));function ha(e){var t=e.sendImageId,a=ua(),n=R.a.useState(!1),r=Object(T.a)(n,2),i=r[0],c=r[1],o=Object(q.useCallback)(function(){var e=Object(ia.a)(na.a.mark((function e(a){var n,r,i,o;return na.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=new FormData,r=Object(ra.a)(a);try{for(r.s();!(i=r.n()).done;)o=i.value,n.append("images",o)}catch(s){r.e(s)}finally{r.f()}return console.log(a),e.next=6,sa()({method:"POST",url:"http://localhost:5000/upload/image",data:n,headers:{"Content-Type":"multipart/form-data boundary=".concat(n._boundary)}}).then((function(e){t(e.data.image_id),c(!0),console.log("SUCCESS!!",e)})).catch((function(){console.log("FAILURE!!"),c(!1)}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]),s=Object(ca.a)({onDrop:o}),l=s.getRootProps,d=s.getInputProps,j=s.isDragActive;return Object(te.jsx)(se.a,{className:a.root,children:Object(te.jsxs)(le.a,{children:[Object(te.jsx)(de.a,{children:Object(te.jsxs)("div",Object(D.a)(Object(D.a)({},l()),{},{children:[Object(te.jsx)("input",Object(D.a)(Object(D.a)({},d()),{},{name:"images"})),j?Object(te.jsx)("p",{className:a.drag_drop,children:"Drop the images here ..."}):Object(te.jsx)("p",{className:a.drag_drop,children:"Drag and drop image"})]}))}),Object(te.jsx)(la.a,{children:Object(te.jsx)(da.a,{edge:"start",color:"primary",checked:i,tabIndex:-1,disableRipple:!0})})]})})}var ma=a(447),Oa=a(127),xa=a.n(Oa),pa=Object(P.a)((function(e){return{root:{"& .MuiTextField-root":{margin:e.spacing(1),width:"calc( 50% - 16px)"}}}}));function ga(){var e=pa(),t=Object(q.useState)(null),a=Object(T.a)(t,2),n=a[0],r=a[1],i=Object(q.useState)(null),c=Object(T.a)(i,2),o=c[0],s=c[1],l=R.a.useState(!1),d=Object(T.a)(l,2),j=d[0],b=d[1],u=Object(Ze.a)(Je),h=Object(T.a)(u,2),m=h[0],O=h[1].data,x=Object(q.useRef)(),p=Object(q.useRef)(),g=Object(q.useRef)(),f=Object(q.useRef)(),v=Object(q.useRef)(),I=Object(q.useRef)(),y=Object(q.useRef)(),N=Object(q.useRef)(),w=Object(q.useRef)(),S=Object(q.useRef)(),k=Object(q.useRef)(),$=Object(q.useRef)(),_=Object(q.useRef)(),C=Object(q.useRef)(),D=Object(q.useRef)(),F=Object(q.useRef)(),P=Object(q.useRef)(),A=Object(q.useRef)(),B=Object(q.useRef)(),W=Object(q.useRef)(),E=Object(q.useRef)(),L=Object(q.useRef)();Object(q.useEffect)((function(){O&&(console.log(O),b(!0))}),[O]);var z=function(e,t){"clickaway"!==t&&b(!1)};return Object(te.jsxs)(te.Fragment,{children:[Object(te.jsx)(Se.a,{align:"center",color:"secondary",variant:"h3",component:"h2",children:"Create Bibliographic Record "}),Object(te.jsxs)("form",{className:e.root,noValidate:!0,autoComplete:"off",children:[Object(te.jsxs)(Dt.a,{container:!0,display:"flex",justify:"space-between",children:[Object(te.jsx)(gt.a,{required:!0,ref:x,label:"title",title:"The name is given to the resource. Typically, a Title will be a name by which the resource is formally known"}),Object(te.jsx)(gt.a,{required:!0,ref:p,label:"creator"}),Object(te.jsx)(gt.a,{title:"The topic of the content of the resource. Typically, a Subject will be expressed as keywords or key phrases, or classification codes that describe the topic of the resource. Recommended best practice is to select a value from a controlled vocabulary or formal classification scheme",ref:g,label:"subject and keywords"}),Object(te.jsx)(gt.a,{ref:f,label:"description"}),Object(te.jsx)(gt.a,{ref:v,label:"Resource Type"}),Object(te.jsx)(gt.a,{ref:I,label:"source"}),Object(te.jsx)(gt.a,{ref:y,label:"relation"}),Object(te.jsx)(gt.a,{ref:N,title:"The extent or scope of the content of the resource. Coverage will typically include spatial location (a place name or geographic coordinates), temporal period (a period label, date, or date range), or jurisdiction (such as a named administrative entity). Recommended best practice is to select a value from a controlled vocabulary (for example, the Thesaurus of Geographic Names). Where appropriate, named places or periods should be used in preference to numeric identifiers such as sets of coordinates or date ranges",label:"coverage"}),Object(te.jsx)(gt.a,{ref:w,label:"publisher"}),Object(te.jsx)(gt.a,{ref:S,label:"contributor"}),Object(te.jsx)(gt.a,{ref:k,label:"rights"}),Object(te.jsx)(gt.a,{ref:$,label:"date "}),Object(te.jsx)(gt.a,{title:"The physical or digital manifestation of the resource. Typically, the Format may include the media type or dimensions of the resource. Examples of dimensions include size and duration. The format may be used to determine the software, hardware, or other equipment needed to display or operate the resource",ref:_,label:"format"}),Object(te.jsx)(gt.a,{ref:C,title:"An unambiguous reference to the resource within a given context. Recommended best practice is to identify the resource utilizing a string or number conforming to a formal identification system. Examples of formal identification systems include the Uniform Resource Identifier (URI) (including the Uniform Resource Locator (URL), the Digital Object Identifier (DOI), and the International Standard Book Number (ISBN)",label:"identifier"}),Object(te.jsx)(gt.a,{ref:D,label:"language"}),Object(te.jsx)(gt.a,{ref:F,label:"audience"}),Object(te.jsx)(gt.a,{ref:P,label:"provenance"}),Object(te.jsx)(gt.a,{ref:A,label:"right holders"}),Object(te.jsx)(gt.a,{ref:B,label:"instructional method"}),Object(te.jsx)(gt.a,{ref:W,label:"accrual method"}),Object(te.jsx)(gt.a,{ref:E,label:"accrual periodicity"}),Object(te.jsx)(gt.a,{ref:L,label:"accrual policy"})]}),Object(te.jsx)(ba,{sendDataToParent:function(e){r(e)}}),Object(te.jsx)(ha,{sendImageId:function(e){s(e)}}),Object(te.jsx)(we.a,{variant:"contained",color:"primary",onClick:function(e){var t=x.current.childNodes[1].childNodes[0];g=g.current.childNodes[1].childNodes[0].value,p=p.current.childNodes[1].childNodes[0].value,f=f.current.childNodes[1].childNodes[0].value,v=v.current.childNodes[1].childNodes[0].value,I=I.current.childNodes[1].childNodes[0].value,y=y.current.childNodes[1].childNodes[0].value,N=N.current.childNodes[1].childNodes[0].value,w=w.current.childNodes[1].childNodes[0].value,S=S.current.childNodes[1].childNodes[0].value,k=k.current.childNodes[1].childNodes[0].value,$=$.current.childNodes[1].childNodes[0].value,_=_.current.childNodes[1].childNodes[0].value,C=C.current.childNodes[1].childNodes[0].value,D=D.current.childNodes[1].childNodes[0].value,F=F.current.childNodes[1].childNodes[0].value,P=P.current.childNodes[1].childNodes[0].value,A=A.current.childNodes[1].childNodes[0].value,B=B.current.childNodes[1].childNodes[0].value,W=W.current.childNodes[1].childNodes[0].value,E=E.current.childNodes[1].childNodes[0].value,L=L.current.childNodes[1].childNodes[0].value,"INPUT"===t.tagName&&t.value&&m({variables:{title:t.value,fileId:n,imageId:o,creator:p,subject:g,description:f,type:v,source:I,relation:y,coverage:N,publisher:w,contributor:S,rights:k,date:$,format:_,identifier:C,language:D,audience:F,provenance:P,right_holders:A,instructional_method:B,accrual_method:W,accrual_periodicity:E,accrual_policy:L}})},children:"Send"})]}),Object(te.jsx)(ma.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:j,autoHideDuration:6e3,onClose:z,message:"Your record successfully send",action:Object(te.jsxs)(R.a.Fragment,{children:[O?Object(te.jsxs)("a",{href:"http://localhost:5000/"+O.createRecord.path,children:[Object(te.jsx)(we.a,{color:"secondary",size:"small",onClick:z,children:"Open Record"}),console.log(O.createRecord.path)]}):null,Object(te.jsx)(ye.a,{size:"small","aria-label":"close",color:"inherit",onClick:z,children:Object(te.jsx)(xa.a,{fontSize:"small"})})]})})]})}var fa=a(433),va=Object(P.a)((function(e){return{book_form_paper:{marginTop:"1rem",padding:"1rem"}}}));function Ia(){var e=va();return Object(te.jsxs)(R.a.Fragment,{children:[Object(te.jsx)(fa.a,{}),Object(te.jsx)(ve.a,{maxWidth:"sm",children:Object(te.jsxs)(Ie.a,{className:e.book_form_paper,children:[" ",Object(te.jsx)(ga,{})," "]})})]})}var ya=a(222),Na=a.n(ya),wa=a(221),Sa=a.n(wa),ka=a(356),$a=a(236),qa=a.p+"static/media/defaultbook.b508dd32.jpg",Ra=Object(P.a)((function(e){return{container:{width:"1000px",marginRight:"auto",marginLeft:"auto"},root:{boxSizing:"border-box",width:"100%",margin:e.spacing(2),display:"flex",justifyContent:"space-between"},details:{display:"flex",flexDirection:"column",alignItems:"center"},content:{flex:"1 0 auto"},cover:{width:"240px",height:"310px",objectFit:"cover"},controls:{display:"flex",alignItems:"center",paddingLeft:e.spacing(1),paddingBottom:e.spacing(1)},playIcon:{height:38,width:38},modal:{display:"flex",alignItems:"center",justifyContent:"center"},paper:{backgroundColor:e.palette.background.paper,boxShadow:e.shadows[5],padding:e.spacing(2,4,3),position:"relative"},close_button:{position:"absolute",right:"0.5rem",top:"0.5rem"},pagination_button:{display:"flex",justifyContent:"center",padding:"15px"},pagination_page:{textAlign:"center",padding:"15px"}}}));function _a(){var e=Ra(),t=R.a.useState(!1),a=Object(T.a)(t,2),n=a[0],r=a[1],i=Object(q.useState)(1),c=Object(T.a)(i,2),o=c[0],s=c[1],l=Object(Xe.a)(Ee,{variables:{page:o,limit:5}}),d=l.data,j=(l.loading,l.error,Object(Ze.a)(Ke)),b=Object(T.a)(j,1)[0],u=Object(It.a)(wt).data,h=function(){r(!0)},m=function(){r(!1)},O=Object(q.useState)(null),x=Object(T.a)(O,2),p=(x[0],x[1],Object(q.useState)(1)),g=Object(T.a)(p,2);g[0],g[1];return Object(te.jsxs)(Dt.a,{className:e.container,container:!0,children:[d&&d.records?d.records.map((function(t,a){return Object(te.jsx)(se.a,{width:"100%",className:e.root,children:Object(te.jsx)(le.a,{width:"100%",children:Object(te.jsxs)(ot.a,{className:e.root,children:[Object(te.jsxs)("div",{className:e.details,children:[Object(te.jsxs)(lt.a,{className:e.content,children:[Object(te.jsx)(Se.a,{component:"h5",variant:"h5",children:t.title}),Object(te.jsx)(Se.a,{variant:"subtitle1",color:"textSecondary",children:"Author: "+t.creator||!1}),Object(te.jsx)(Se.a,{variant:"subtitle1",color:"textSecondary",children:"Date: "+t.date||!1}),Object(te.jsx)(Se.a,{variant:"subtitle1",color:"textSecondary",children:"Identifier: "+t.identifier||!1})]}),Object(te.jsxs)("div",{className:e.controls,children:[Object(te.jsx)(Se.a,{component:"p",children:u&&t.fileId&&u.subscribeDownload.file_id===t.fileId.fileId?u.subscribeDownload.count:t.countOfDownloads||""}),t.fileId?Object(te.jsx)("a",{download:!0,href:"http://localhost:5000/"+t.fileId.filename,target:"_blank",children:Object(te.jsx)(ye.a,{onClick:function(){b({variables:{fileId:t.fileId.fileId}})},tabIndex:-1,children:Object(te.jsx)(Sa.a,{className:e.playIcon})})}):"doesn't have full text",Object(te.jsx)(ye.a,{onClick:h,children:Object(te.jsx)(Na.a,{className:e.playIcon})}),Object(te.jsx)(ka.a,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",className:e.modal,open:n,onClose:m,closeAfterTransition:!0,BackdropComponent:Wt.a,BackdropProps:{timeout:500},children:Object(te.jsx)($a.a,{in:n,children:Object(te.jsxs)("div",{className:e.paper,children:[Object(te.jsx)(ye.a,{onClick:m,className:e.close_button,children:Object(te.jsx)(xa.a,{})}),Object(te.jsx)(Se.a,{variant:"subtitle1",color:"textSecondary",children:"Description: "+t.description||!1})]})})})]})]}),t.imageId?Object(te.jsx)(Ht.a,{className:"book-cover-image",image:"http://localhost:5000/"+t.imageId.filename,title:t.imageId.filename}):Object(te.jsx)(Ht.a,{className:e.cover,image:qa,title:"unaviable cover"})]})})},a)})):Object(te.jsx)(te.Fragment,{}),Object(te.jsxs)(Ne.a,{className:e.pagination_button,disableElevation:!0,variant:"contained",color:"primary",children:[Object(te.jsx)(we.a,{disabled:1===o,onClick:function(){return s(o-1)},children:Object(te.jsx)(pe.a,{})}),Object(te.jsx)(Se.a,{className:e.pagination_page,p:2,children:o}),Object(te.jsx)(we.a,{disabled:!!(d&&d.records.length<5),onClick:function(){return s(o+1)},children:Object(te.jsx)(fe.a,{})})]})]})}var Ca=a(26),Ta=a(452),Da=a(443),Fa=a(164),Pa=a.n(Fa),Aa=a(165),Ba=a.n(Aa),Wa=a(223),Ea=a.n(Wa),La=a(224),za=a(47),Ua=Object(La.autoPlay)(Ea.a),Ma=[{label:"San Francisco \u2013 Oakland Bay Bridge, United States",imgPath:"https://images.unsplash.com/photo-1537944434965-cf4679d1a598?auto=format&fit=crop&w=400&h=250&q=60"},{label:"Bird",imgPath:"https://images.unsplash.com/photo-1538032746644-0212e812a9e7?auto=format&fit=crop&w=400&h=250&q=60"},{label:"Bali, Indonesia",imgPath:"https://images.unsplash.com/photo-1537996194471-e657df975ab4?auto=format&fit=crop&w=400&h=250&q=80"},{label:"NeONBRAND Digital Marketing, Las Vegas, United States",imgPath:"https://images.unsplash.com/photo-1518732714860-b62714ce0c59?auto=format&fit=crop&w=400&h=250&q=60"},{label:"Go\u010d, Serbia",imgPath:"https://images.unsplash.com/photo-1512341689857-198e7e2f3ca8?auto=format&fit=crop&w=400&h=250&q=60"}],Qa=Object(P.a)((function(e){return{root:{maxWidth:600,flexGrow:1,margin:"0 auto"},header:{display:"flex",alignItems:"center",height:50,paddingLeft:e.spacing(4),backgroundColor:e.palette.background.default},img:{height:355,display:"block",maxWidth:600,overflow:"hidden",width:"100%"},card:{display:"flex",margin:"20px 20px"},cardDetails:{flex:1},cardMedia:{width:260},mainFeaturedPost:{position:"relative",backgroundColor:e.palette.grey[800],color:e.palette.common.white,marginBottom:e.spacing(4),backgroundImage:"url(https://source.unsplash.com/random)",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center"},overlay:{position:"absolute",top:0,bottom:0,right:0,left:0,backgroundColor:"rgba(0,0,0,.3)"},mainFeaturedPostContent:Object(it.a)({position:"relative",padding:e.spacing(3)},e.breakpoints.up("md"),{padding:e.spacing(6),paddingRight:0})}})),Ya=function(){var e=Qa(),t=Object(Ca.a)(),a=R.a.useState(0),n=Object(T.a)(a,2),r=n[0],i=n[1],c=Ma.length,o=Object(Xe.a)(Le).data;return Object(te.jsxs)(te.Fragment,{children:[Object(te.jsxs)(Ie.a,{className:e.mainFeaturedPost,style:{backgroundImage:"url(https://static.toiimg.com/photo/80507427.cms)"},children:[Object(te.jsx)("img",{style:{display:"none"},src:"https://nccde.org/ImageRepository/Document?documentID=25042",alt:"image"}),Object(te.jsx)("div",{className:e.overlay}),Object(te.jsx)(Dt.a,{container:!0,children:Object(te.jsx)(Dt.a,{item:!0,md:6,children:Object(te.jsxs)("div",{className:e.mainFeaturedPostContent,children:[Object(te.jsx)(Se.a,{component:"h1",variant:"h3",color:"inherit",gutterBottom:!0,children:"Virtual Service of Library"}),Object(te.jsx)(Se.a,{variant:"h5",color:"inherit",paragraph:!0,children:"One of the service is ask a librarian. You can easily send your question to the librarian with our service."}),"Ask a librarian"]})})})]}),Object(te.jsx)(Se.a,{element:"h2",variant:"h2",text:"center",children:" The most readed"}),Object(te.jsx)(Dt.a,{container:!0,display:"flex",children:o&&o.mostDownloaded?o.mostDownloaded.map((function(t,a){return Object(te.jsx)(Dt.a,{item:!0,xs:12,md:6,children:Object(te.jsx)(Gt.a,{component:"a",href:"#",children:Object(te.jsxs)(ot.a,{className:e.card,children:[Object(te.jsx)("div",{className:e.cardDetails,children:Object(te.jsxs)(lt.a,{children:[Object(te.jsx)(Se.a,{component:"h2",variant:"h5",children:t.title}),Object(te.jsx)(Se.a,{variant:"subtitle1",color:"textSecondary",children:t.date||"2011"}),Object(te.jsx)(Se.a,{variant:"subtitle1",paragraph:!0,children:t.description}),Object(te.jsx)(Se.a,{variant:"subtitle1",color:"primary",children:Object(te.jsx)(za.b,{to:"list",children:"view all"})})]})}),Object(te.jsx)(Da.a,{xsDown:!0,children:Object(te.jsx)(Ht.a,{className:e.cardMedia,image:"http://localhost:5000/"+t.imageId.filename,title:"image for title",imageTitle:"image"})})]})})},a)})):Object(te.jsx)(te.Fragment,{})}),Object(te.jsxs)("div",{className:e.root,children:[Object(te.jsx)(Ie.a,{square:!0,elevation:0,className:e.header,children:Object(te.jsx)(Se.a,{children:Ma[r].label})}),Object(te.jsx)(Ua,{axis:"rtl"===t.direction?"x-reverse":"x",index:r,onChangeIndex:function(e){i(e)},enableMouseEvents:!0,children:Ma.map((function(t,a){return Object(te.jsx)("div",{children:Math.abs(r-a)<=2?Object(te.jsx)("img",{className:e.img,src:t.imgPath,alt:t.label}):null},t.label)}))}),Object(te.jsx)(Ta.a,{steps:c,position:"static",variant:"text",activeStep:r,nextButton:Object(te.jsxs)(we.a,{size:"small",onClick:function(){i((function(e){return e+1}))},disabled:r===c-1,children:["Next","rtl"===t.direction?Object(te.jsx)(Pa.a,{}):Object(te.jsx)(Ba.a,{})]}),backButton:Object(te.jsxs)(we.a,{size:"small",onClick:function(){i((function(e){return e-1}))},disabled:0===r,children:["rtl"===t.direction?Object(te.jsx)(Ba.a,{}):Object(te.jsx)(Pa.a,{}),"Back"]})})]})]})};var Ga=function(){var e=re(!1),t=Object(T.a)(e,1)[0];return Object(te.jsxs)(Tt.d,{children:[Object(te.jsx)(Tt.b,{exact:!0,path:"/",children:Object(te.jsx)(Ya,{})}),Object(te.jsx)(Tt.b,{exact:!0,path:"/reader",children:3===parseInt(t.userType)?Object(te.jsx)(ta,{}):Object(te.jsx)(Tt.a,{to:"/"})}),Object(te.jsx)(Tt.b,{exact:!0,path:"/librarian",children:2===parseInt(t.userType)?Object(te.jsx)(Ct,{}):Object(te.jsx)(Tt.a,{to:"/"})}),Object(te.jsx)(Tt.b,{exact:!0,path:"/books",children:Object(te.jsx)(Ia,{})}),Object(te.jsx)(Tt.b,{exact:!0,path:"/list",children:Object(te.jsx)(_a,{})})]})},Ha=a(441),Va=a(35),Ja=a(158),Ka=a(340),Xa=a(338),Za=a(71),en=a(229),tn=a(231),an=a(449),nn=a(438),rn=a(439),cn=a(226),on=a.n(cn),sn=a(227),ln=a.n(sn),dn=a(228),jn=a.n(dn),bn=a(135),un=a.n(bn),hn=a(79),mn=a.n(hn),On=a(436),xn=a(435),pn=a(352),gn=a(444),fn=a(454),vn=a(434),In=a(166),yn=a.n(In),Nn=a(348),wn=(a(225),a(353));function Sn(){return Object(te.jsxs)(Se.a,{variant:"body2",color:"textSecondary",align:"center",children:["Copyright \xa9 ",Object(te.jsx)(vn.a,{color:"inherit",href:"https://material-ui.com/",children:"Your Website"})," ",(new Date).getFullYear(),"."]})}var kn=Object(P.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(3)}}}));function $n(){var e=kn(),t=Object(q.useState)(!1),a=Object(T.a)(t,2),n=a[0],r=a[1],i=Object(q.useRef)(),c=Object(q.useRef)(),o=Object(q.useRef)(),s=Object(q.useRef)(),l=Object(q.useRef)(),d=Object(q.useRef)(),j=Object(q.useRef)(),b=Object(q.useState)("3"),u=Object(T.a)(b,2),h=u[0],m=u[1],O=re(!0),x=Object(T.a)(O,1)[0],p=Object(q.useState)({textmask:"(998)",numberformat:"1320"}),g=Object(T.a)(p,2),f=g[0],v=g[1],I=Object(q.useState)(""),y=Object(T.a)(I,2),N=y[0],w=y[1],S=Object(q.useState)(""),k=Object(T.a)(S,2),$=k[0],R=k[1],_=function(e){m(e.target.value)},C=Object(Xe.a)(Pe),F=(C.loading,C.data),P=Object(Ze.a)(Qe),A=Object(T.a)(P,2),B=A[0],W=A[1],E=W.data,L=W.error,z=Object(Ze.a)(Ye),U=Object(T.a)(z,2),M=U[0],Q=U[1],Y=Q.data,G=Q.error,H=Object(Ze.a)(ze),V=Object(T.a)(H,2),J=V[0],K=V[1].data,X=Object(q.useState)(""),Z=Object(T.a)(X,2),ae=Z[0],ne=Z[1];console.log(K&&K.loginReader.data),Object(q.useEffect)((function(){L?ne(L):G?ne(G):Y&&200!==Y.addReader.status?ne(Y.addReader.message):K&&200!==K.loginReader.status?ne(K.loginReader.message):E&&200!==E.addLibrarian.status?ne(E.addLibrarian.message):Y&&200===Y.addReader.status?(ne(""),localStorage.setItem("token",Y.addReader.token),localStorage.setItem("usertype",Y.addReader.data.user_status),localStorage.setItem("readerId",Y.addReader.data[0].reader_id),x({token:Y.addReader.token,userType:Y.addReader.data.user_status,id:Y.addReader.data[0].reader_id})):K&&200===K.loginReader.status?(ne(""),localStorage.setItem("token",K.loginReader.token),localStorage.setItem("usertype",K.loginReader.data.user_status),localStorage.setItem("readerId",K.loginReader.data.reader_id),x({token:K.loginReader.token,userType:K.loginReader.data.user_status,id:K.loginReader.reader_id})):E&&200===E.addLibrarian.status&&(ne(""),localStorage.setItem("token",E.addLibrarian.token),localStorage.setItem("usertype",E.addLibrarian.data.user_status),localStorage.setItem("librarianId",E.addLibrarian.data.librarian_id),x({token:E.addLibrarian.token,userType:E.addLibrarian.data.user_status,id:E.addLibrarian.data.librarian_id}))}),[L,G,E,Y,K]);return Object(te.jsx)(te.Fragment,{children:n?Object(te.jsxs)(ve.a,{component:"main",maxWidth:"xs",children:[Object(te.jsx)(fa.a,{}),Object(te.jsxs)("div",{className:e.paper,children:[Object(te.jsx)(be.a,{className:e.avatar,children:Object(te.jsx)(yn.a,{})}),Object(te.jsx)(Se.a,{component:"h1",variant:"h5",children:"Sign in"}),ae?Object(te.jsx)("div",{className:"login-error",children:ae}):Object(te.jsx)(te.Fragment,{}),Object(te.jsxs)("form",{className:e.form,autoComplete:"off",onSubmit:function(e){return e.preventDefault()},children:[Object(te.jsxs)(Dt.a,{container:!0,spacing:2,children:[Object(te.jsx)(Dt.a,{item:!0,xs:12,sm:12,children:Object(te.jsx)(gt.a,{name:"username",variant:"outlined",required:!0,fullWidth:!0,ref:c,label:"Username"})}),Object(te.jsx)(Dt.a,{item:!0,xs:12,children:Object(te.jsx)(gt.a,{variant:"outlined",ref:s,required:!0,fullWidth:!0,name:"password",label:"Password",type:"password"})}),Object(te.jsx)(Dt.a,{item:!0,xs:12,children:Object(te.jsxs)(At.a,{children:[Object(te.jsx)(pn.a,{component:"legend",children:"Login as:"}),Object(te.jsxs)(fn.a,{"aria-label":"gender",name:"gender1",value:h,required:!0,onChange:_,children:[Object(te.jsx)(xn.a,{value:"3",control:Object(te.jsx)(gn.a,{}),label:"Reader"}),Object(te.jsx)(xn.a,{value:"2",control:Object(te.jsx)(gn.a,{}),label:"Librarian"}),Object(te.jsx)(xn.a,{value:"1",control:Object(te.jsx)(gn.a,{}),label:"Admin"})]})]})})]}),Object(te.jsx)(we.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit,onClick:function(e){e.preventDefault(),"3"===h&&!0===n&&J({variables:{username:c.current.childNodes[1].childNodes[0].value,password:s.current.childNodes[1].childNodes[0].value}})},children:"Sign In"}),Object(te.jsx)(Dt.a,{container:!0,justify:"flex-end",children:Object(te.jsx)(Dt.a,{item:!0,children:Object(te.jsx)(we.a,{onClick:function(){return r(!1)},children:"Sign up"})})})]})]}),Object(te.jsx)(ee.a,{mt:5,children:Object(te.jsx)(Sn,{})})]}):Object(te.jsxs)(ve.a,{component:"main",maxWidth:"xs",children:[Object(te.jsx)(fa.a,{}),Object(te.jsxs)("div",{className:e.paper,children:[Object(te.jsx)(be.a,{className:e.avatar,children:Object(te.jsx)(yn.a,{})}),Object(te.jsx)(Se.a,{component:"h1",variant:"h5",children:"Sign up"}),ae?Object(te.jsx)("div",{className:"login-error",children:ae}):Object(te.jsx)(te.Fragment,{}),Object(te.jsxs)("form",{className:e.form,autoComplete:"off",onSubmit:function(e){return e.preventDefault()},children:[Object(te.jsxs)(Dt.a,{container:!0,spacing:2,children:[Object(te.jsx)(Dt.a,{item:!0,xs:12,sm:12,children:Object(te.jsx)(gt.a,{name:"username",variant:"outlined",required:!0,fullWidth:!0,ref:i,label:"Username"})}),Object(te.jsx)(Dt.a,{item:!0,xs:12,children:Object(te.jsx)(gt.a,{variant:"outlined",ref:o,required:!0,fullWidth:!0,name:"password",label:"Password",type:"password"})}),Object(te.jsx)(Dt.a,{item:!0,xs:12,children:Object(te.jsxs)(At.a,{children:[Object(te.jsx)(pn.a,{component:"legend",children:"Login as:"}),Object(te.jsxs)(fn.a,{"aria-label":"gender",name:"gender1",value:h,required:!0,onChange:_,children:[Object(te.jsx)(xn.a,{value:"3",control:Object(te.jsx)(gn.a,{}),label:"Reader"}),Object(te.jsx)(xn.a,{value:"2",control:Object(te.jsx)(gn.a,{}),label:"Librarian"}),Object(te.jsx)(xn.a,{value:"1",disabled:!0,control:Object(te.jsx)(gn.a,{}),label:"Admin"})]})]})}),"2"===h?Object(te.jsxs)(te.Fragment,{children:[Object(te.jsx)(Dt.a,{item:!0,xs:12,sm:6,children:Object(te.jsx)(gt.a,{autoComplete:"fname",name:"firstName",variant:"outlined",required:!0,fullWidth:!0,ref:d,label:"First Name",autoFocus:!0})}),Object(te.jsx)(Dt.a,{item:!0,xs:12,sm:6,children:Object(te.jsx)(gt.a,{variant:"outlined",required:!0,fullWidth:!0,ref:j,label:"Last Name",name:"lastName",autoComplete:"lname"})}),Object(te.jsx)(Dt.a,{item:!0,xs:6,children:Object(te.jsxs)(At.a,{className:e.formControl,children:[Object(te.jsxs)(Bt.a,{value:$,onChange:function(e){R(e.target.value)},fullWidth:!0,children:[Object(te.jsx)(Pt.a,{value:"",children:Object(te.jsx)("em",{children:"None"})}),F&&F.lib?F.lib.map((function(e,t){return Object(te.jsx)(Pt.a,{value:e.libraryId,children:e.libraryName},t)})):null]}),Object(te.jsx)(wn.a,{children:"Library"})]})})]}):Object(te.jsxs)(te.Fragment,{children:[Object(te.jsx)(Dt.a,{item:!0,xs:12,children:Object(te.jsx)(gt.a,{variant:"outlined",required:!0,fullWidth:!0,ref:l,label:"Email Address",name:"email",autoComplete:"email"})}),Object(te.jsx)(Dt.a,{item:!0,xs:6,children:Object(te.jsxs)(At.a,{className:e.formControl,children:[Object(te.jsxs)(Bt.a,{labelId:"demo-simple-select-autowidth-label",value:N,onChange:function(e){w(e.target.value)},fullWidth:!0,children:[Object(te.jsx)(Pt.a,{value:"",children:Object(te.jsx)("em",{children:"None"})}),F&&F.readerRoles?F.readerRoles.map((function(e,t){return Object(te.jsx)(Pt.a,{value:e.roleId,children:e.roleName},t)})):null]}),Object(te.jsx)(wn.a,{children:"Reader Role"})]})})]}),Object(te.jsxs)(At.a,{children:[Object(te.jsx)(Ft.a,{htmlFor:"formatted-text-mask-input",children:"phone number"}),Object(te.jsx)(Nn.a,{value:f.textmask,onChange:function(e){v(Object(D.a)(Object(D.a)({},f),{},Object(it.a)({},e.target.name,e.target.value)))},name:"textmask",id:"formatted-text-mask-input",required:!0})]})]}),Object(te.jsx)(we.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit,onClick:function(e){if(e.preventDefault(),"3"===h&&!1===n)try{M({variables:{username:i.current.childNodes[1].childNodes[0].value,password:o.current.childNodes[1].childNodes[0].value,readerEmail:l.current.childNodes[1].childNodes[0].value||null,readerRole:N||null,readerPhone:f.textmask||null}})}catch(ae){ne(ae.message)}else if("2"===h&&!1===n)try{i.current.childNodes[1].childNodes[0].value&&o.current.childNodes[1].childNodes[0].value&&d.current.childNodes[1].childNodes[0].value&&j.current.childNodes[1].childNodes[0].value&&f.textmask?(B({variables:{username:i.current.childNodes[1].childNodes[0].value,password:o.current.childNodes[1].childNodes[0].value,firstName:d.current.childNodes[1].childNodes[0].value,lastName:j.current.childNodes[1].childNodes[0].value,librarianPhone:f.textmask,library:$||null}}),ne("")):ne("fill required fields")}catch(ae){console.log(ae),ne(ae.message)}},children:"Sign Up"}),Object(te.jsx)(Dt.a,{container:!0,justify:"flex-end",children:Object(te.jsx)(Dt.a,{item:!0,children:Object(te.jsx)(we.a,{onClick:function(){return r(!0)},variant:"body2",children:"Already have an account? Sign in"})})})]})]}),Object(te.jsx)(ee.a,{mt:5,children:Object(te.jsx)(Sn,{})})]})})}function qn(){var e,t=R.a.useState(!1),a=Object(T.a)(t,2),n=a[0],r=a[1],i=R.a.useState("paper"),c=Object(T.a)(i,2),o=c[0],s=c[1],l=R.a.useRef(null);return R.a.useEffect((function(){if(n){var e=l.current;null!==e&&e.focus()}}),[n]),Object(te.jsxs)("div",{children:[Object(te.jsx)(we.a,{className:"login-button",onClick:(e="body",function(){r(!0),s(e)}),children:"login"}),Object(te.jsx)(On.a,{open:n,onClose:function(){r(!1)},scroll:o,"aria-labelledby":"scroll-dialog-title","aria-describedby":"scroll-dialog-description",children:Object(te.jsx)($n,{})})]})}var Rn=a(437),_n=a(233),Cn=a(134),Tn=a.n(Cn),Dn=a(159),Fn=a.n(Dn),Pn=Object(P.a)((function(e){return{grow:{flexGrow:1},sectionDesktop:Object(it.a)({display:"none"},e.breakpoints.up("md"),{display:"flex"}),sectionMobile:Object(it.a)({display:"flex"},e.breakpoints.up("md"),{display:"none"})}}));function An(e){var t=e.data,a=Pn(),n=R.a.useState(null),r=Object(T.a)(n,2),i=r[0],c=r[1],o=R.a.useState(null),s=Object(T.a)(o,2),l=s[0],d=s[1],j=Boolean(i),b=Boolean(l),u=function(e){c(e.currentTarget)},h=function(){d(null)},m=function(){c(null),h()},O=function(){window.localStorage.removeItem("usertype"),window.localStorage.removeItem("token"),window.localStorage.removeItem("readerId"),window.location.reload(!1),c(null),h()},x="primary-search-account-menu",p=Object(te.jsxs)(_n.a,{anchorEl:i,anchorOrigin:{vertical:"top",horizontal:"right"},id:x,keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:j,onClose:m,children:[Object(te.jsx)(Pt.a,{onClick:m,children:"Profile"}),Object(te.jsx)(Pt.a,{onClick:m,children:"My account"}),Object(te.jsx)(Pt.a,{onClick:O,children:"Log Out"})]}),g="primary-search-account-menu-mobile",f=Object(te.jsxs)(_n.a,{anchorEl:l,anchorOrigin:{vertical:"top",horizontal:"right"},id:g,keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:b,onClose:h,children:[Object(te.jsxs)(Pt.a,{children:[Object(te.jsx)(ye.a,{"aria-label":"show 4 new mails",color:"inherit",children:Object(te.jsx)(Rn.a,{badgeContent:t.readerUnread.length?t.readerUnread.length:null,color:"secondary",children:Object(te.jsx)(mn.a,{})})}),Object(te.jsx)("p",{children:"Messages"})]}),Object(te.jsxs)(Pt.a,{onClick:u,children:[Object(te.jsx)(ye.a,{"aria-label":"account of current user","aria-controls":"primary-search-account-menu","aria-haspopup":"true",color:"inherit",children:Object(te.jsx)(Tn.a,{})}),Object(te.jsx)("p",{children:"Profile"})]}),Object(te.jsxs)(Pt.a,{onClick:u,children:[Object(te.jsx)(ye.a,{"aria-label":"log out user","aria-controls":"primary-search-account-menu","aria-haspopup":"true",color:"inherit",onClick:O,children:Object(te.jsx)(Tn.a,{})}),Object(te.jsx)("p",{children:"Log out"})]})]});return Object(te.jsxs)("div",{children:[Object(te.jsxs)(nn.a,{children:[Object(te.jsx)("div",{className:a.grow}),Object(te.jsxs)("div",{className:a.sectionDesktop,children:[Object(te.jsx)(vn.a,{className:"reader-message-link",href:"reader",color:"inherit",children:Object(te.jsx)(ye.a,{color:"inherit",children:Object(te.jsx)(Rn.a,{badgeContent:t.readerUnread.length?t.readerUnread.length:null,color:"secondary",children:Object(te.jsx)(mn.a,{})})})}),Object(te.jsx)(ye.a,{edge:"end","aria-label":"account of current user","aria-controls":x,"aria-haspopup":"true",onClick:u,color:"inherit",children:Object(te.jsx)(Tn.a,{})})]}),Object(te.jsx)("div",{className:a.sectionMobile,children:Object(te.jsx)(ye.a,{"aria-label":"show more","aria-controls":g,"aria-haspopup":"true",onClick:function(e){d(e.currentTarget)},color:"inherit",children:Object(te.jsx)(Fn.a,{})})})]}),f,p]})}var Bn=240,Wn=Object(P.a)((function(e){return{root:{display:"flex"},appBar:{transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{width:"calc(100% - ".concat(Bn,"px)"),marginLeft:Bn,transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen})},menuButton:{marginRight:e.spacing(2)},hide:{display:"none",padding:0},drawer:{width:Bn,flexShrink:0},drawerPaper:{width:Bn},drawerHeader:Object(D.a)(Object(D.a)({display:"flex",alignItems:"center",padding:e.spacing(0,1)},e.mixins.toolbar),{},{justifyContent:"flex-end"}),content:{flexGrow:1,transition:e.transitions.create("margin",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),marginLeft:-240},contentShift:{transition:e.transitions.create("margin",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen}),marginLeft:0},list_link:{color:"inherit",textDecoration:"none"},grow:{flexGrow:1}}})),En=function(e){var t=Wn(),a=Object(Xe.a)(Re,{variables:{readerId:parseInt(e.id)||(e.reader?e.reader.reader_id:null)}}),n=a.loading,r=(a.error,a.data);return Object(te.jsx)(te.Fragment,{children:n?Object(te.jsx)(Wt.a,{className:t.backdrop,open:!0,children:Object(te.jsx)(Et.a,{color:"inherit"})}):r?Object(te.jsx)(An,{data:r}):Object(te.jsx)(we.a,{color:"inherit",children:Object(te.jsx)(qn,{})})})},Ln=function(e){var t=Wn(),a=Object(Xe.a)(Ae,{variables:{librarianId:parseInt(e.user.id)}}),n=a.loading,r=a.data;return Object(te.jsx)(te.Fragment,{children:n?Object(te.jsx)(Wt.a,{className:t.backdrop,open:!0,children:Object(te.jsx)(Et.a,{color:"inherit"})}):r?Object(te.jsxs)(te.Fragment,{children:[r.librarians[0].firstName+" "+r.librarians[0].lastName,Object(te.jsx)(we.a,{color:"inherit",onClick:function(){window.localStorage.removeItem("token"),window.localStorage.removeItem("usertype"),window.localStorage.removeItem("librarianId"),window.location.reload()},children:Object(te.jsx)(za.b,{to:"/",className:t.list_link,replace:!0,children:"Log out"})})]}):Object(te.jsx)(we.a,{color:"inherit",children:Object(te.jsx)(qn,{})})})};function zn(){var e=Wn(),t=Object(Ca.a)(),a=Object(q.useState)(!1),n=Object(T.a)(a,2),r=n[0],i=n[1],c=re(!1),o=Object(T.a)(c,1)[0];return Object(te.jsxs)("div",{className:e.root,children:[Object(te.jsx)(fa.a,{}),Object(te.jsx)(A.a,{position:"fixed",className:Object(ct.a)(e.appBar,Object(it.a)({},e.appBarShift,r)),children:Object(te.jsxs)(nn.a,{children:[Object(te.jsx)(ye.a,{color:"inherit","aria-label":"open drawer",onClick:function(){i(!0)},edge:"start",className:Object(ct.a)(e.menuButton,r&&e.hide),children:Object(te.jsx)(on.a,{})}),Object(te.jsx)(Se.a,{variant:"h6",noWrap:!0,children:"LibUz"}),Object(te.jsx)("div",{className:e.grow}),o&&2===parseInt(o.userType)?Object(te.jsx)(Ln,{user:o}):o&&3===parseInt(o.userType)?Object(te.jsx)(En,{user:o}):Object(te.jsx)(we.a,{color:"inherit",children:Object(te.jsx)(qn,{})})]})}),Object(te.jsxs)(an.a,{className:e.drawer,variant:"persistent",anchor:"left",open:r,classes:{paper:e.drawerPaper},children:[Object(te.jsx)("div",{className:e.drawerHeader,children:Object(te.jsx)(ye.a,{onClick:function(){i(!1)},children:"ltr"===t.direction?Object(te.jsx)(ln.a,{}):Object(te.jsx)(jn.a,{})})}),Object(te.jsx)(rn.a,{}),Object(te.jsxs)(se.a,{children:[Object(te.jsx)(za.b,{to:"list",className:e.list_link,replace:!0,children:Object(te.jsxs)(le.a,{button:!0,children:[Object(te.jsxs)(la.a,{children:[" ",Object(te.jsx)(un.a,{})," "]}),Object(te.jsx)(de.a,{primary:"Books"})]})}),o&&3===parseInt(o.userType)?Object(te.jsx)(za.b,{to:"reader",className:e.list_link,replace:!0,children:Object(te.jsxs)(le.a,{button:!0,children:[Object(te.jsxs)(la.a,{children:[" ",Object(te.jsx)(mn.a,{})," "]}),Object(te.jsx)(de.a,{primary:"Ask a librarian"})]})}):Object(te.jsx)(te.Fragment,{}),o&&2===parseInt(o.userType)?Object(te.jsx)(za.b,{to:"books",className:e.list_link,replace:!0,children:Object(te.jsxs)(le.a,{button:!0,children:[Object(te.jsxs)(la.a,{children:[" ",Object(te.jsx)(un.a,{})," "]}),Object(te.jsx)(de.a,{primary:"Create new Bibliographic Record"})]})}):Object(te.jsx)(te.Fragment,{}),o&&2===parseInt(o.userType)?Object(te.jsx)(za.b,{to:"librarian",className:e.list_link,replace:!0,children:Object(te.jsxs)(le.a,{button:!0,children:[Object(te.jsxs)(la.a,{children:[" ",Object(te.jsx)(mn.a,{})," "]}),Object(te.jsx)(de.a,{primary:"Answer to readers questions"})]})}):Object(te.jsx)(te.Fragment,{})]}),Object(te.jsx)(rn.a,{}),Object(te.jsx)(se.a,{children:["About us","About Project","News"].map((function(e,t){return Object(te.jsxs)(le.a,{button:!0,children:[Object(te.jsx)(la.a,{children:t%2===0?Object(te.jsx)(un.a,{}):Object(te.jsx)(mn.a,{})}),Object(te.jsx)(de.a,{primary:e})]},e)}))})]}),Object(te.jsx)("main",{className:Object(ct.a)(e.content,Object(it.a)({},e.contentShift,r)),children:Object(te.jsx)("div",{className:e.drawerHeader})})]})}var Un=new Ha.a({uri:"/ill"}),Mn=new en.a({uri:"/subscriptions",options:{reconnect:!0}}),Qn=Object(Va.split)((function(e){var t=e.query,a=Object(Za.e)(t);return"OperationDefinition"===a.kind&&"subscription"===a.operation}),Mn,Un),Yn=Object(tn.a)((function(e,t){t.headers;return{headers:{token:localStorage.getItem("token")||"",usertype:localStorage.getItem("usertype")||""}}})),Gn=new Ja.a({link:Yn.concat(Qn),cache:new Ka.a});C.a.render(Object(te.jsx)(za.a,{children:Object(te.jsx)(Xa.a,{client:Gn,children:Object(te.jsxs)(ne,{children:[Object(te.jsx)(zn,{}),Object(te.jsx)(ce,{children:Object(te.jsx)(Ga,{})})]})})}),document.getElementById("root"))}},[[339,1,2]]]);
//# sourceMappingURL=main.d573e2eb.chunk.js.map